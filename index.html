<!doctype html>
<html>
    <head>
        <title>Converter</title>
        <link rel="icon" href="./png/icon.png">
        <link href="style.css" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Overpass&display=swap" rel="stylesheet">
        <script src="JavaScript/limit_input.js"></script>
        <script src="JavaScript/unit_switcher.js" charset="utf-8"></script>
        <script src="JavaScript/input_checker.js" charset="utf-8"></script>
        <script src="JavaScript/visual_maker.js" charset="utf-8"></script>
    </head>
    <body>
        <header>
          <!-- select measures here -->
          <nav>
            <ul>
              <a href="temp.html">Temperature</a>
              <a class="active" href="index.html">Length</a>
              <a href="area.html">Area</a>
              <a href="vol.html">Volume</a>
              <a href="time.html">Time</a>
              <a href="speed.html">Speed</a>
              <a href="timeZones.html">Time Zones</a>
              <a href="currency.html">Currency</a>
              <a href="mass_weight.html">Mass and Weight</a>
              <a href="#openModal"> Help </a>
            </ul>
          </nav>
          <!-- Start of logo -->
          <div class="center"> <img src="png\logo.png"> </div>
          <!-- End of Logo -->

        </header>
<!-- Start of Help button screens -->
        <div id="openModal" class="modalDialog">
            <div>
                <a href="#openModal2">Next</a>
                <a href="#close" title="Close" class="close">X</a>
                <h2>1. Choose a unit type</h2>
                <a><img src="png\Step1.png"></a>
                <p>Choose which kind of unit conversion you would like to do</p>
            </div>
        </div>
        <div id="openModal2" class="modalDialog">
            <div>
                <a href="#openModal">Previous</a>
                <a href="#close" title="Close" class="close">X</a>
                <a href="#openModal3">Next</a>
                <h2>2. Enter the unit to convert from</h2>
                <a> <img src="png\Step2.png"></a>
                <p>Enter the unit amount you wish to convert from and chooose the type of unit from the dropdown menu.</p>
            </div>
        </div>
        <div id="openModal3" class="modalDialog">
            <div>
                <a href="#openModal2">Previous</a>
                <a href="#close" title="Close" class="close">X</a>
                <a href="#openModal4">Next</a>
                <h2>3. Choose the unit to convert to</h2>
                <a> <img src="png\Step3.png"></a>
                <p>The units available to convert to are found in the dropdown menu.</p>
            </div>
        </div>
        <div id="openModal4" class="modalDialog">
            <div>
                <a href="#openModal3">Previous</a>
                <a href="#close" title="Close" class="close">X</a>
                <a href="#openModal5">Next</a>
                <h2>4. The swap button</h2>
                <a> <img src="png\Step4.png"></a>
                <p>This moves the unit in the convert from to convert to and convert to to convert from.</p>
            </div>
        </div>
        <div id="openModal5" class="modalDialog">
            <div>
                <a href="#openModal4">Previous</a>
                <a href="#close" title="Close" class="close">X</a>
                <a href="#openModal6">Next</a>
                <h2>5. The convert button</h2>
                <a> <img src="png\Step5.png"></a>
                <p>This will calculate the conversion between the 2 units and provide a visualization below.</p>
            </div>
        </div>
        <div id="openModal6" class="modalDialog">
            <div>
                <a href="#openModal5">Previous</a>
                <a href="#close" title="Close" class="close">X</a>
                <h2>6. Visualization</h2>
                <a> <img src="png\Step6.png"></a>
                <p>Here the conversion can be found along with a graphical representation of these 2 units.</p>
            </div>
        </div>
<!-- End of Help button screens -->

        <main>
          <!-- values are inputted here -->
          <div id="converter">
            <!-- select one unit here -->
            <div id="primary">
              <form>

                <input type="number" id="primaryInput" placeholder="Enter a value here" onkeyup="checkInput(); limit(this);" onkeydown="limit(this);">
                <select id="primarySelect">
                  <option value="inch">Inches</option>
                  <option value="feet">Feet</option>
                  <option value="yard">Yard</option>
                  <option value="mile">Mile</option>
                  <option value="kilometer">Kilometer</option>
                  <option value="centimeter">Centimeter</option>
                </select>
              </form>
            </div>
            <div id="swap">
              <button class="swapButton" onclick="switchUnits(); checkInput(); generateVisual();">
                â‡Œ
              </button>
            </div>
            <!-- select the other unit here -->
            <div id="secondary">
              <form>
                <input type="number" id="secondaryInput" placeholder="Result shows up here" readonly="readonly">
                <select id="secondarySelect">
                  <option value="inch">Inches</option>
                  <option value="feet">Feet</option>
                  <option value="yard">Yard</option>
                  <option value="mile">Mile</option>
                  <option value="kilometer">Kilometer</option>
                  <option value="centimeter">Centimeter</option>
                </select>
              </form>
            </div>
          </div>
          <div class="center">
            <button id="convertButton" disabled="disabled" onclick="convertUnits(); generateVisual();">
              Convert
            </button>
          </div>
          <!-- visual output is displayed here -->
          <div class="center" id="visualizer">
            <canvas id="visual">
          </div>
          <script>
          function switchUnits(){
            var holdSelect = document.getElementById("primarySelect").options[document.getElementById("primarySelect").selectedIndex].value;
            var holdInput = document.getElementById("primaryInput").value;
            document.getElementById("primarySelect").value = document.getElementById("secondarySelect").options[document.getElementById("secondarySelect").selectedIndex].value;
            document.getElementById("primaryInput").value = document.getElementById("secondaryInput").value;
            document.getElementById("secondarySelect").value = holdSelect;
            document.getElementById("secondaryInput").value = holdInput;
          }
          function checkInput(){
            var input = document.getElementById('primaryInput').value;
            if (input != '') {
                document.getElementById('convertButton').disabled = false;
            }
            else {
                document.getElementById('convertButton').disabled = true;
            }
          }
          /*
          unit conversion function for distance using general units
          first parameter is the input in the primary div class, the second parameter
          unit1 is the first unit to be converted to meters for ease of conversion
          and reduce hard coding. than it will take the input already converted to meters
          and convert it to the unit in unit2
          */
          function calculateConversion(input, primaryUnit, secondaryUnit){
            var meter; //this is the base unit
            if(primaryUnit == secondaryUnit){
              return input
            }
            switch(primaryUnit){
              case "millimeter":
                meter = input*.001;
                break;
              case "centimeter":
                meter = input*0.01;
                break;
              case "meter":
                meter = input;
                break;
              case "kilometer":
                meter = input*1000;
                break;
              case "inch":
                meter = input *0.0254;
                break;
              case "feet":
                meter = input *0.3048;
                break;
              case "yard":
                meter = input *0.9144;
                break;
              case "mile":
                meter = input *1609.34;
                break;
            }
            switch(secondaryUnit){
              case "millimeter":
                return meter*1000;
              case "centimeter":
                return meter *100;
              case "meter":
                return meter;
              case "kilometer":
                return meter *0.001;
              case "inch":
                return meter*39.370078740157;
              case "feet":
                return meter*3.2808398950131;
              case "yard":
                return meter*1.0936132983377;
              case "mile":
                return meter *0.00062137119223733;
            }
            return meter;
          }
          function convertUnits(){
            var input = document.getElementById("primaryInput").value;
            var primaryUnit = document.getElementById("primarySelect").value;
            var secondaryUnit = document.getElementById("secondarySelect").value;
            document.getElementById("secondaryInput").value = calculateConversion(input, primaryUnit, secondaryUnit);
          }

          //Swaps units
          function switchUnits(){
            var holdSelect = document.getElementById("primarySelect").options[document.getElementById("primarySelect").selectedIndex].value;
            var holdInput = document.getElementById("primaryInput").value;
            document.getElementById("primarySelect").value = document.getElementById("secondarySelect").options[document.getElementById("secondarySelect").selectedIndex].value;
            document.getElementById("primaryInput").value = document.getElementById("secondaryInput").value;
            document.getElementById("secondarySelect").value = holdSelect;
            document.getElementById("secondaryInput").value = holdInput;
          }
          </script>
        </main>
    </body>
</html>
