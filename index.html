<!doctype html>
<html>
    <head>
        <title>Converter</title>
        <link href="style.css" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Overpass&display=swap" rel="stylesheet">
        <script src="JavaScript/limit_input.js"></script>
        <script src="JavaScript/unit_switcher.js" charset="utf-8"></script>
        <script src="JavaScript/input_checker.js" charset="utf-8"></script>
        <script src="JavaScript/visual_maker.js" charset="utf-8"></script>
    </head>
    <body onresize="generateVisual()">
        <!-- TODO: add tiles, text inputs, dropdowns, and swap box -->
        <!-- TODO: change dropdown menu based on tile selection -->
        <!-- TODO: create visual output based on entered values -->
        <!-- TODO: create rest of website -->
        <!-- random text for tet commit -->
        <!-- more commit test -->
        <header>
          <!-- select measures here -->
          <nav>
            <ul>
              <a href="temp.html">Temperature</a>
              <a class="active" href="index.html">Length</a>
              <a href="area.html">Area</a>
              <a href="vol.html">Volume</a>
              <a href="time.html">Time</a>
              <a href="speed.html">Speed</a>
            </ul>
          </nav>
        </header>
        <main>
          <!-- values are inputted here -->
          <div id="converter">
            <!-- select one unit here -->
            <div id="primary">
              <form>

                <input type="number" id="primaryInput" placeholder="Enter a value here" onkeyup="checkInput(); limit(this);" onkeydown="limit(this);">
                <select id="primarySelect">
                  <optgroup label="US Customary">
                    <option value="in">Inches</option>
                    <option value="ft">Feet</option>
                    <option value="yd">Yard</option>
                    <option value="mi">Mile</option>
                  </optgroup>
                  <optgroup label="SI Units">
                    <option value="km">Kilometer</option>
                    <option value="cm">Centimeter</option>
                  </optgroup>
                </select>
              </form>
            </div>
            <div id="swap">
              <button class="swapButton" onclick="switchUnits(); checkInput(); generateVisual();">
                â‡Œ
              </button>
            </div>
            <!-- select the other unit here -->
            <div id="secondary">
              <form>
                <input type="number" id="secondaryInput" placeholder="Result shows up here" readonly="readonly">
                <select id="secondarySelect">
                  <optgroup label="US Customary">
                    <option value="in">Inches</option>
                    <option value="ft">Feet</option>
                    <option value="yd">Yard</option>
                    <option value="mi">Mile</option>
                  </optgroup>
                  <optgroup label="SI Units">
                    <option value="km">Kilometer</option>
                    <option value="cm">Centimeter</option>
                  </optgroup>
                </select>
              </form>
            </div>
          </div>
          <div class="center">
            <button id="convertButton" disabled="disabled" onclick="convertUnits(); generateVisual();">
              Convert
            </button>
          </div>
          <!-- visual output is displayed here -->
          <div class="center" id="visualizer">
            <canvas id="visual">
          </div>
          <script>
          function switchUnits(){
            var holdSelect = document.getElementById("primarySelect").options[document.getElementById("primarySelect").selectedIndex].value;
            var holdInput = document.getElementById("primaryInput").value;
            document.getElementById("primarySelect").value = document.getElementById("secondarySelect").options[document.getElementById("secondarySelect").selectedIndex].value;
            document.getElementById("primaryInput").value = document.getElementById("secondaryInput").value;
            document.getElementById("secondarySelect").value = holdSelect;
            document.getElementById("secondaryInput").value = holdInput;
          }
          function checkInput(){
            var input = document.getElementById('primaryInput').value;
            if (input != '') {
                document.getElementById('convertButton').disabled = false;
            }
            else {
                document.getElementById('convertButton').disabled = true;
            }
          }
          /*
          unimplimented unit conversion function for distance using general units
          first parameter is the input in the primary div class, the second parameter
          unit1 is the first unit to be converted to meters for ease of conversion
          and reduce hard coding. than it will take the input already converted to meters
          and convert it to the unit in unit2
          */
          function calculateConversion(input, primaryUnit, secondaryUnit){
            var meter; //this is the base unit
            if(primaryUnit == secondaryUnit){
              return input
            }
            switch(primaryUnit){
              case "mm":
                meter = input*.001;
                break;
              case "cm":
                meter = input*0.01;
                break;
              case "m":
                meter = input;
                break;
              case "km":
                meter = input*1000;
                break;
              case "in":
                meter = input *0.0254;
                break;
              case "ft":
                meter = input *0.3048;
                break;
              case "yd":
                meter = input *0.9144;
                break;
              case "mi":
                meter = input *1609.34;
                break;
            }
            switch(secondaryUnit){
              case "mm":
                return meter*1000;
              case "cm":
                return meter *100;
              case "m":
                return meter;
              case "km":
                return meter *0.001;
              case "in":
                return meter*39.370078740157;
              case "ft":
                return meter*3.2808398950131;
              case "yd":
                return meter*1.0936132983377;
              case "mi":
                return meter *0.00062137119223733;
            }
            return meter;
          }
          function convertUnits(){
            var input = document.getElementById("primaryInput").value;
            var primaryUnit = document.getElementById("primarySelect").value;
            var secondaryUnit = document.getElementById("secondarySelect").value;
            document.getElementById("secondaryInput").value = calculateConversion(input, primaryUnit, secondaryUnit);
          }

          //Swaps units
          function switchUnits(){
            var holdSelect = document.getElementById("primarySelect").options[document.getElementById("primarySelect").selectedIndex].value;
            var holdInput = document.getElementById("primaryInput").value;
            document.getElementById("primarySelect").value = document.getElementById("secondarySelect").options[document.getElementById("secondarySelect").selectedIndex].value;
            document.getElementById("primaryInput").value = document.getElementById("secondaryInput").value;
            document.getElementById("secondarySelect").value = holdSelect;
            document.getElementById("secondaryInput").value = holdInput;
          }
          </script>
        </main>
    </body>
</html>
