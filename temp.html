<!doctype html>
<html>
    <head>
        <title>Converter</title>
        <link href="style.css" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Overpass&display=swap" rel="stylesheet">
    </head>
    <body>
        <!-- TODO: add tiles, text inputs, dropdowns, and swap box -->
        <!-- TODO: change dropdown menu based on tile selection -->
        <!-- TODO: create visual output based on entered values -->
        <!-- TODO: create rest of website -->
        <!-- random text for tet commit -->
        <!-- more commit test -->
        <header>
          <!-- select measures here -->
          <div class="nav">
              <ul>
                <a class="active" href="temp.html">Temperature</a>
                <a href="conversion.html">Length</a>
                <a href="area.html">Area</a>
                <a href="vol.html">Volume</a>
                <a href="time.html">Time</a>
                <a href="speed.html">Speed</a>
              </ul>
          </div>
        </header>
        <main>
          <!-- values are inputted here -->
          <div id="converter">
            <!-- select one unit here -->
            <div id="primary">
              <form>
<!-- HEAD
                <input type="number" name="primary">
                <select>
                  <option value="inches">Inches</option>
                  <option value="feet">Feet</option>
                  <option value="yard">Yard</option>
                  <option value="mile">Mile</option>
======= -->
                <input type="number" name="primary" id="primaryInput">
                <select id="primarySelect">
                  <option value="Celsius">Celsius</option>
                  <option value="Kelvin">Kelvin</option>
                  <option value="Fahrenheit">Fahrenheit</option>
<!-->>>>>>> develop -->
                </select>
              </form>
            </div>
            <div id="swap">
              <button class="swapButton" onclick="switchUnits()">
                â‡Œ
              </button>
            </div>
            <!-- select the other unit here -->
            <div id="secondary">
              <form>
<!--<<<<<<< HEAD
                <input type="number" name="secondary">
                <select>
                  <option value="inches">Inches</option>
                  <option value="feet">Feet</option>
                  <option value="yard">Yard</option>
                  <option value="mile">Mile</option>
======= -->
                <input type="number" name="secondary" id="secondaryInput">
                <select id="secondarySelect">
                  <option value="Celsius">Celsius</option>
                  <option value="Kelvin">Kelvin</option>
                  <option value="Fahrenheit">Fahrenheit</option>
<!-->>>>>>> develop -->
                </select>
              </form>
            </div>
          </div>
          <div class="center">
            <button class="convertButton" onclick="convertTemp(); generateVisual();">
              Convert
            </button>
          </div>
          <!-- visual output is displayed here -->
          <div class="center" id="visualizer">
            <canvas id="visual">
          </div>
          <script>
            function switchUnits(){
              hold = document.getElementById("primarySelect").value;
              document.getElementById("primarySelect").value = document.getElementById("secondarySelect").value;
              document.getElementById("secondarySelect").value = hold;

            }
          /*
          unimplimented unit conversion function for distance using general units
          first parameter is the input in the primary div class, the second parameter
          unit1 is the first unit to be converted to meters for ease of conversion
          and reduce hard coding. than it will take the input already converted to meters
          and convert it to the unit in unit2
          */
            function convertTemp(){
              input = document.getElementById("primaryInput").value;//this is the right value of the text
              input = parseFloat(input)
              unit1 = document.getElementById("primarySelect").value;//
              unit2 = document.getElementById("secondarySelect").value;
              switch(unit1){
                case "Celsius":
                  break;
                case "Kelvin":
                  input = input - 273.15;
                  break;
                case "Fahrenheit":
                  input = (input - 32) / 1.8;
                  break;
              }
              switch(unit2){
                case "Celsius":
                  break;
                case "Kelvin":
                  input = input + 273.15;
                  break;
                case "Fahrenheit":
                  input = (input * 1.8) + 32;
                  break;
                }
              document.getElementById("secondaryInput").value = input;
              //just returns the input for now, subject to change
            }
            /*this takes in the two converted values and scales images based on the
            *relative sizes
            */
            function generateVisual()
              {
              /* creating the canvas */
              var canvas = document.getElementById("visual");
              var visualizer = document.getElementById("visualizer");
              canvas.width = visualizer.offsetWidth-50;
              canvas.height = visualizer.offsetHeight-50;
              var ctx = canvas.getContext("2d");
              ctx.fillStyle = "#FFFFFF";
              ctx.fillRect(0, 0, canvas.width, canvas.width);
              /* drawing the axes */
              ctx.beginPath();
              ctx.moveTo(0, canvas.height/2 - 3);
              ctx.lineTo(canvas.width, canvas.height/2 - 3);
              ctx.strokeStyle = String(getComputedStyle(document.documentElement).getPropertyValue('--primary-color'));
              ctx.stroke();
              ctx.beginPath();
              ctx.moveTo(0, canvas.height/2 + 3);
              ctx.lineTo(canvas.width, canvas.height/2 + 3);
              ctx.strokeStyle = String(getComputedStyle(document.documentElement).getPropertyValue('--secondary-color'));
              ctx.stroke();
              /*labelling axes*/
              ctx.font = "20px Overpass";
              ctx.fillStyle = "#000000";
              ctx.fillText(document.getElementById("primarySelect").value, 10, 30);
              ctx.fillText(document.getElementById("secondarySelect").value, 10, canvas.height-30);
              /* drawing the markings */
              ctx.beginPath();
              ctx.moveTo(canvas.width/2, canvas.height/3);
              ctx.lineTo(canvas.width/2, canvas.height-(canvas.height/3));
              ctx.strokeStyle = "#000000";
              ctx.stroke();
              ctx.textAlign = "center";
              ctx.fillText(document.getElementById("primaryInput").value, canvas.width/2, 30);
              ctx.fillText(document.getElementById("secondaryInput").value, canvas.width/2, canvas.height-30);
              var lowerBoundPrimary = parseFloat(document.getElementById("primaryInput").value) - 30;
              var upperBoundPrimary = parseFloat(document.getElementById("primaryInput").value) + 30;
              var scaleFactor = canvas.width/(upperBoundPrimary - lowerBoundPrimary);
              for (var i = Math.ceil(lowerBoundPrimary); i <= upperBoundPrimary; i++){
                if (i != document.getElementById("primaryInput").value && i >= 0){
                  ctx.beginPath();
                  ctx.moveTo(scaleFactor*(i-lowerBoundPrimary), canvas.height/2.6);
                  ctx.lineTo(scaleFactor*(i-lowerBoundPrimary), canvas.height/2 - 3);
                  ctx.strokeStyle = String(getComputedStyle(document.documentElement).getPropertyValue('--primary-color'));
                  ctx.stroke();
                  ctx.font = "10px Overpass";
                  ctx.fillText(i, scaleFactor*(i-lowerBoundPrimary), canvas.height/2.8);
                }
              }
              var lowerBoundSecondary = calculateConversion(lowerBoundPrimary, document.getElementById("primarySelect").value, document.getElementById("secondarySelect").value);
              var upperBoundSecondary = calculateConversion(upperBoundPrimary, document.getElementById("primarySelect").value, document.getElementById("secondarySelect").value);
              var scaleFactor = canvas.width/(upperBoundSecondary - lowerBoundSecondary);
              var increment = 1;
              while ((upperBoundSecondary - lowerBoundSecondary)/increment < 2){
                increment /= 10;
              }
              while ((upperBoundSecondary - lowerBoundSecondary)/increment > 60){
                increment *= 10;
              }
              if (increment < 1){
                for (var i = Math.ceil(lowerBoundSecondary)*increment; i <= upperBoundSecondary; i += increment){
                  if (i != document.getElementById("secondaryInput").value && i >= 0){
                    ctx.beginPath();
                    ctx.moveTo(scaleFactor*(i-lowerBoundSecondary), canvas.height/2 + 3);
                    ctx.lineTo(scaleFactor*(i-lowerBoundSecondary), canvas.height - canvas.height/2.6);
                    ctx.strokeStyle = String(getComputedStyle(document.documentElement).getPropertyValue('--secondary-color'));
                    ctx.stroke();
                    ctx.font = "10px Overpass";
                    ctx.fillText(i, scaleFactor*(i-lowerBoundSecondary), canvas.height - canvas.height/2.8);
                  }
                }
              }
              else{
                for (var i = Math.ceil(lowerBoundSecondary); i <= upperBoundSecondary; i += increment){
                  if (i != document.getElementById("secondaryInput").value && i >= 0){
                    ctx.beginPath();
                    ctx.moveTo(scaleFactor*(i-lowerBoundSecondary), canvas.height/2 + 3);
                    ctx.lineTo(scaleFactor*(i-lowerBoundSecondary), canvas.height - canvas.height/2.6);
                    ctx.strokeStyle = String(getComputedStyle(document.documentElement).getPropertyValue('--secondary-color'));
                    ctx.stroke();
                    ctx.font = "10px Overpass";
                    ctx.fillText(i, scaleFactor*(i-lowerBoundSecondary), canvas.height - canvas.height/2.8);
                  }
                }
              }
              }
          </script>
        </main>
    </body>
</html>
